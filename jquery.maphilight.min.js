(function(C){var A,B,H,I,J,G,E,D,F;A=document.namespaces;has_canvas=document.createElement("canvas");has_canvas=has_canvas&&has_canvas.getContext;if(!(has_canvas||A)){C.fn.maphilight=function(){return this};return }if(has_canvas){E=function(L,M,K){if(M<=1){L.style.opacity=M;window.setTimeout(E,10,L,M+0.1,10)}};D=function(K){return Math.max(0,Math.min(parseInt(K,16),255))};F=function(K,L){return"rgba("+D(K.substr(0,2))+","+D(K.substr(2,2))+","+D(K.substr(4,2))+","+L+")"};B=function(K){var L=C('<canvas style="width:'+K.width+"px;height:"+K.height+'px;"></canvas>').get(0);L.getContext("2d").clearRect(0,0,L.width,L.height);return L};H=function(P,L,K,O){var N,M=P.getContext("2d");M.beginPath();if(L=="rect"){M.rect(K[0],K[1],K[2]-K[0],K[3]-K[1])}else{if(L=="poly"){M.moveTo(K[0],K[1]);for(N=2;N<K.length;N+=2){M.lineTo(K[N],K[N+1])}}else{if(L=="circ"){M.arc(K[0],K[1],K[2],0,Math.PI*2,false)}}}M.closePath();if(O.fill){M.fillStyle=F(O.fillColor,O.fillOpacity);M.fill()}if(O.stroke){M.strokeStyle=F(O.strokeColor,O.strokeOpacity);M.lineWidth=O.strokeWidth;M.stroke()}if(O.fade){E(P,0)}};I=function(K,L){K.getContext("2d").clearRect(0,0,K.width,K.height)}}else{document.createStyleSheet().addRule("v\\:*","behavior: url(#default#VML); antialias: true;");document.namespaces.add("v","urn:schemas-microsoft-com:vml");B=function(K){return C('<var style="zoom:1;overflow:hidden;display:block;width:'+K.width+"px;height:"+K.height+'px;"></var>').get(0)};H=function(O,L,K,N){var P,Q,M;P='<v:fill color="#'+N.fillColor+'" opacity="'+(N.fill?N.fillOpacity:0)+'" />';Q=(N.stroke?'strokeweight="'+N.strokeWidth+'" stroked="t" strokecolor="#'+N.strokeColor+'"':'stroked="f"');M='<v:stroke opacity="'+N.strokeOpacity+'"/>';if(L=="rect"){O.innerHTML='<v:rect filled="t" '+Q+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+K[0]+"px;top:"+K[1]+"px;width:"+(K[2]-K[0])+"px;height:"+(K[3]-K[1])+'px;">'+P+M+"</v:rect>"}else{if(L=="poly"){O.innerHTML='<v:shape filled="t" '+Q+' coordorigin="0,0" coordsize="'+O.width+","+O.height+'" path="m '+K[0]+","+K[1]+" l "+K.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+O.width+"px;height:"+O.height+'px;">'+P+M+"</v:shape>"}else{if(L=="circ"){O.innerHTML='<v:oval filled="t" '+Q+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(K[0]-K[2])+"px;top:"+(K[1]-K[2])+"px;width:"+(K[2]*2)+"px;height:"+(K[2]*2)+'px;">'+P+M+"</v:oval>"}}}};I=function(K){K.innerHTML=""}}J=function(M){var L,K=M.getAttribute("coords").split(",");for(L=0;L<K.length;L++){K[L]=parseFloat(K[L])}return[M.getAttribute("shape").toLowerCase().substr(0,4),K]};G={position:"absolute",left:0,top:0,padding:0};C.fn.maphilight=function(K){K=C.extend({},C.fn.maphilight.defaults,K);return this.each(function(){var M,O,P,N,L;M=C(this);O=C.metadata?C.extend({},K,M.metadata()):K;P=C('map[name="'+M.attr("usemap").substr(1)+'"]');if(!(M.is("img")&&M.attr("usemap")&&P.size()>0&&!M.hasClass("maphilighted"))){return }M.wrap(C("<span>").css({display:"block",background:"url("+this.src+")",position:"relative",padding:0,width:this.width,height:this.height}));M.css("opacity",0).css("border",0).css(G);if(C.browser.msie){M.css("filter","Alpha(opacity=0)")}N=B(this);C(N).css(G);N.height=this.height;N.width=this.width;L=function(R){var Q=J(this);H(N,Q[0],Q[1],C.metadata?C.extend({},O,C(this).metadata()):O)};if(O.alwaysOn){C(P).find("area[coords]").each(L)}else{C(P).find("area[coords]").mouseover(L).mouseout(function(Q){I(N)})}M.before(N);M.addClass("maphilighted")})};C.fn.maphilight.defaults={fill:true,fillColor:"000000",fillOpacity:0.2,stroke:true,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:true,alwaysOn:false}})(jQuery);