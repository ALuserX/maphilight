(function(E){var B,C,I,K,J,H,F,D,G,A;B=document.namespaces;has_canvas=document.createElement("canvas");has_canvas=has_canvas&&has_canvas.getContext;if(!(has_canvas||B)){E.fn.maphilight=function(){return this};return }if(has_canvas){F=function(N,M,L){if(M<=1){N.style.opacity=M;window.setTimeout(F,10,N,M+0.1,10)}};D=function(L){return Math.max(0,Math.min(parseInt(L,16),255))};G=function(L,M){return"rgba("+D(L.substr(0,2))+","+D(L.substr(2,2))+","+D(L.substr(4,2))+","+M+")"};C=function(L){var M=E('<canvas style="width:'+L.width+"px;height:"+L.height+'px;"></canvas>').get(0);M.getContext("2d").clearRect(0,0,M.width,M.height);return M};I=function(O,L,R,N,M){var Q,P=O.getContext("2d");P.beginPath();if(L=="rect"){P.rect(R[0],R[1],R[2]-R[0],R[3]-R[1])}else{if(L=="poly"){P.moveTo(R[0],R[1]);for(Q=2;Q<R.length;Q+=2){P.lineTo(R[Q],R[Q+1])}}else{if(L=="circ"){P.arc(R[0],R[1],R[2],0,Math.PI*2,false)}}}P.closePath();if(N.fill){P.fillStyle=G(N.fillColor,N.fillOpacity);P.fill()}if(N.stroke){P.strokeStyle=G(N.strokeColor,N.strokeOpacity);P.lineWidth=N.strokeWidth;P.stroke()}if(N.fade){F(O,0)}};K=function(L,M){L.getContext("2d").clearRect(0,0,L.width,L.height)}}else{if(E.browser.msie){document.createStyleSheet().addRule("v\\:*","behavior: url(#default#VML); antialias: true;");document.namespaces.add("v","urn:schemas-microsoft-com:vml")}C=function(L){return E('<var style="zoom:1;overflow:hidden;display:block;width:'+L.width+"px;height:"+L.height+'px;"></var>').get(0)};I=function(M,P,Q,T,L){var R,S,N,O;R='<v:fill color="#'+T.fillColor+'" opacity="'+(T.fill?T.fillOpacity:0)+'" />';S=(T.stroke?'strokeweight="'+T.strokeWidth+'" stroked="t" strokecolor="#'+T.strokeColor+'"':'stroked="f"');N='<v:stroke opacity="'+T.strokeOpacity+'"/>';if(P=="rect"){O=E('<v:rect name="'+L+'" filled="t" '+S+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+Q[0]+"px;top:"+Q[1]+"px;width:"+(Q[2]-Q[0])+"px;height:"+(Q[3]-Q[1])+'px;"></v:rect>')}else{if(P=="poly"){O=E('<v:shape name="'+L+'" filled="t" '+S+' coordorigin="0,0" coordsize="'+M.width+","+M.height+'" path="m '+Q[0]+","+Q[1]+" l "+Q.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+M.width+"px;height:"+M.height+'px;"></v:shape>')}else{if(P=="circ"){O=E('<v:oval name="'+L+'" filled="t" '+S+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(Q[0]-Q[2])+"px;top:"+(Q[1]-Q[2])+"px;width:"+(Q[2]*2)+"px;height:"+(Q[2]*2)+'px;"></v:oval>')}}}O.get(0).innerHTML=R+N;E(M).append(O)};K=function(L){E(L).find("[name=highlighted]").remove()}}J=function(M){var L,N=M.getAttribute("coords").split(",");for(L=0;L<N.length;L++){N[L]=parseFloat(N[L])}return[M.getAttribute("shape").toLowerCase().substr(0,4),N]};A=function(L){if(!L.complete){return false}if(typeof L.naturalWidth!="undefined"&&L.naturalWidth==0){return false}return true};H={position:"absolute",left:0,top:0,padding:0,border:0};E.fn.maphilight=function(L){L=E.extend({},E.fn.maphilight.defaults,L);return this.each(function(){var R,O,U,N,Q,S,T,P;R=E(this);if(!A(this)){return window.setTimeout(function(){R.maphilight(L)},200)}U=E.metadata?E.extend({},L,R.metadata()):L;N=E('map[name="'+R.attr("usemap").substr(1)+'"]');if(!(R.is("img")&&R.attr("usemap")&&N.size()>0)){return }if(R.hasClass("maphilighted")){var M=R.parent();R.insertBefore(M);M.remove()}O=E("<div>").css({display:"block",background:"url("+this.src+")",position:"relative",padding:0,width:this.width,height:this.height});R.before(O).css("opacity",0).css(H).remove();if(E.browser.msie){R.css("filter","Alpha(opacity=0)")}O.append(R);Q=C(this);E(Q).css(H);Q.height=this.height;Q.width=this.width;T=function(X){var V,W;W=E.metadata?E.extend({},U,E(this).metadata()):U;if(!W.alwaysOn){V=J(this);I(Q,V[0],V[1],W,"highlighted")}};if(U.alwaysOn){E(N).find("area[coords]").each(T)}else{if(E.metadata){E(N).find("area[coords]").each(function(){var V,W;W=E.metadata?E.extend({},U,E(this).metadata()):U;if(W.alwaysOn){if(!S){S=C(R.get());E(S).css(H);S.width=R.width();S.height=R.height();R.before(S)}V=J(this);if(E.browser.msie){I(Q,V[0],V[1],W,"")}else{I(S,V[0],V[1],W,"")}}})}E(N).find("area[coords]").mouseover(T).mouseout(function(V){K(Q)})}R.before(Q);R.addClass("maphilighted")})};E.fn.maphilight.defaults={fill:true,fillColor:"000000",fillOpacity:0.2,stroke:true,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:true,alwaysOn:false}})(jQuery);