(function(E){var B=document.namespaces;var I=document.createElement("canvas");I=I&&I.getContext;if(!(I||B)){E.fn.maphilight=function(){return this};return }var C,J,L;if(I){var F=function(O,N,M){if(N<=1){O.style.opacity=N;window.setTimeout(F,10,O,N+0.1,10)}};var D=function(M){return Math.max(0,Math.min(parseInt(M,16),255))};var H=function(M,N){return"rgba("+D(M.substr(0,2))+","+D(M.substr(2,2))+","+D(M.substr(4,2))+","+N+")"};C=function(M){var N=E('<canvas style="width:'+M.width+"px;height:"+M.height+'px;"></canvas>').get(0);N.getContext("2d").clearRect(0,0,N.width,N.height);return N};J=function(O,M,R,N){var Q=O.getContext("2d");Q.beginPath();if(M=="rect"){Q.rect(R[0],R[1],R[2]-R[0],R[3]-R[1])}else{if(M=="poly"){Q.moveTo(R[0],R[1]);for(var P=2;P<R.length;P+=2){Q.lineTo(R[P],R[P+1])}}else{if(M=="circ"){Q.arc(R[0],R[1],R[2],0,Math.PI*2,false)}}}Q.closePath();if(N.fill){Q.fillStyle=H(N.fillColor,N.fillOpacity);Q.fill()}if(N.stroke){Q.strokeStyle=H(N.strokeColor,N.strokeOpacity);Q.lineWidth=N.strokeWidth;Q.stroke()}if(N.fade){F(O,0)}};L=function(M,N){M.getContext("2d").clearRect(0,0,M.width,M.height)}}else{var A=document.createStyleSheet();A.addRule("v\\:*","behavior: url(#default#VML); antialias: true;");document.namespaces.add("v","urn:schemas-microsoft-com:vml");C=function(M){return E('<var style="zoom:1;overflow:hidden;display:block;width:'+M.width+"px;height:"+M.height+'px;"></var>').get(0)};J=function(P,M,Q,O){var T='<v:fill color="#'+O.fillColor+'" opacity="'+(O.fill?O.fillOpacity:0)+'" />';var S=(O.stroke?'strokeweight="'+O.strokeWidth+'" stroked="t" strokecolor="#'+O.strokeColor+'"':'stroked="f"');var N='<v:stroke opacity="'+O.strokeOpacity+'"/>';if(M=="rect"){P.innerHTML='<v:rect filled="t" '+S+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+Q[0]+"px;top:"+Q[1]+"px;width:"+(Q[2]-Q[0])+"px;height:"+(Q[3]-Q[1])+'px;">'+T+N+"</v:rect>"}else{if(M=="poly"){var R=Q.join(",");P.innerHTML='<v:shape filled="t" '+S+' coordorigin="0,0" coordsize="'+P.width+","+P.height+'" path="m '+Q[0]+","+Q[1]+" l "+R+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+P.width+"px;height:"+P.height+'px;">'+T+N+"</v:shape>"}else{if(M=="circ"){P.innerHTML='<v:oval filled="t" '+S+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(Q[0]-Q[2])+"px;top:"+(Q[1]-Q[2])+"px;width:"+(Q[2]*2)+"px;height:"+(Q[2]*2)+'px;">'+T+N+"</v:oval>"}}}};L=function(M){M.innerHTML=""}}var K=function(N){var O=N.getAttribute("coords").split(",");for(var M=0;M<O.length;M++){O[M]=parseFloat(O[M])}return[N.getAttribute("shape").toLowerCase().substr(0,4),O]};var G={position:"absolute",left:0,top:0,padding:0};E.fn.maphilight=function(M){M=E.extend({},E.fn.maphilight.defaults,M);return this.each(function(){var P=E(this);var R=E.metadata?E.extend({},M,P.metadata()):M;var S=E('map[name="'+P.attr("usemap").substr(1)+'"]');if(!(P.is("img")&&P.attr("usemap")&&S.size()>0&&!P.hasClass("maphilighted"))){return }P.wrap(E('<div style="background:url('+this.src+");position: relative; padding: 0; width: "+this.width+"px; height: "+this.height+'px"></div>'));P.css("opacity",0).css("border",0).css(G);if(E.browser.msie){P.css("filter","Alpha(opacity=0)")}var Q=C(this);E(Q).css(G);Q.height=this.height;Q.width=this.width;var N=function(U){var T=K(this);J(Q,T[0],T[1],E.metadata?E.extend({},R,E(this).metadata()):R)};if(R.alwaysOn){var O=E(S).find("area[coords]").each(N)}else{E(S).find("area[coords]").mouseover(N).mouseout(function(T){L(Q)})}P.before(Q);P.addClass("maphilighted")})};E.fn.maphilight.defaults={fill:true,fillColor:"000000",fillOpacity:0.2,stroke:true,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:true,alwaysOn:false}})(jQuery);